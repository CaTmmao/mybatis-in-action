<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hcsp.mybatis.OrderDao">
    <select id="getInnerJoinOrders" resultMap="order">
        select `ORDER`.id as order_id,
        User.name as user_name,
        Goods.name as goods_name,
        cast(`ORDER`.goods_num * `ORDER`.goods_price as bigint) as total_price
        from `ORDER`
        inner join User on `ORDER`.user_id = User.id
        inner join Goods on `ORDER`.goods_id = Goods.id
        group by "ORDER".id
    </select>

    <resultMap id="order" type="com.github.hcsp.mybatis.entity.Order">
        <result property="id" column="order_id"/>
        <result property="totalPrice" column="total_price"/>
        <association property="user" javaType="com.github.hcsp.mybatis.entity.User">
            <result property="name" column="user_name"/>
        </association>
        <association property="goods" javaType="com.github.hcsp.mybatis.entity.Goods">
            <result property="name" column="goods_name"/>
        </association>
    </resultMap>
</mapper>